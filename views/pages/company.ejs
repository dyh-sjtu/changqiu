<% include ../includes/backend-head.ejs %>
<body style="overflow-x: hidden;background-color: #eee;">
<% include ../includes/backend-header.ejs %>
<div class="main">
    <% include ../includes/backend-sidebar.ejs %>
    <div class="backend-container">
        <div class="row pb-10" style="margin-right: 0;margin-left: 0">
            <h2 class="w100 tc">å…³äºç•…çƒ</h2>
        </div>
        <hr class="layui-bg-blue pt-5">
        <div class="backend-content" style="background-color: #fff">
            <div class="layui-form" style="padding: 0 15px">
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input type="hidden" value="<%= company && company._id %>" class="layui-input"
                               id="company_id">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_introduction">å…¬å¸ç®€ä»‹</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·è¾“å…¥å…¬å¸ç®€ä»‹" class="layui-textarea"
                                  id="company_introduction"><%= company && company.introduction %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_character">å…¬å¸ç‰¹å¾</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·æŒ‰ç…§å¡«å†™è¯´æ˜è¾“å…¥å…¬å¸çš„ç‰¹å¾" class="layui-textarea"
                                  id="company_character"><%= company && company.character %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_imgUrl">å…¬å¸å›¾ç‰‡</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= company && company.imgUrl %>"
                               placeholder="è¯·è¾“å…¥å…¬å¸å°é¢å›¾ç‰‡åœ°å€"
                               autocomplete="on" class="layui-input" id="company_imgUrl">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_honor">å…¬å¸è£èª‰</label>
                    <div class="layui-input-block">
                        <textarea placeholder="è¯·æŒ‰ç…§å¡«å†™è¯´æ˜è¾“å…¥å…¬å¸çš„è£èª‰" class="layui-textarea"
                                  id="company_honor"><%= company && company.honor %></textarea>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_tel">å…¨å›½ç»Ÿä¸€æœåŠ¡çƒ­çº¿</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= company && company.tel %>"
                               placeholder="è¯·è¾“å…¥å…¬å¸çš„å…¨å›½ç»Ÿä¸€æœåŠ¡çƒ­çº¿"
                               autocomplete="on" class="layui-input" id="company_tel">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_address">å…¬å¸åœ°å€</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= company && company.address %>"
                               placeholder="è¯·è¾“å…¥å…¬å¸çš„æ‰€åœ¨åœ°å€"
                               autocomplete="on" class="layui-input" id="company_address">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_email">å…¬å¸é‚®ç®±</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= company && company.email %>"
                               placeholder="è¯·è¾“å…¥å…¬å¸çš„è”ç³»é‚®ç®±"
                               autocomplete="on" class="layui-input" id="company_email">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_phoneNumber">ç•…çƒåœè½¦ç³»ç»Ÿäº§å“å’¨è¯¢</label>
                    <div class="layui-input-block">
                        <input type="text" value="<%= company && company.phoneNumber %>"
                               placeholder="è¯·è¾“å…¥ç•…çƒåœè½¦ç³»ç»Ÿäº§å“å’¨è¯¢"
                               autocomplete="on" class="layui-input" id="company_phoneNumber">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label" for="company_note">å¡«å†™è¯´æ˜</label>
                    <div class="layui-input-block">
                        <textarea id="company_note" style="cursor: not-allowed;color:red"
                                  disabled="disabled" class="layui-textarea">å…¬å¸ç‰¹å¾å¡«å†™æ ¼å¼å¦‚: ç‰¹å¾åç§°1=ç‰¹å¾æè¿°1&&ç‰¹å¾åç§°2=ç‰¹å¾æè¿°2...;  å…¬å¸è£èª‰æ¯ä¸ªè¯ä¹¦ä¹‹é—´ç”¨: è£èª‰åç§°1=å›¾ç‰‡url1&&è£èª‰åç§°2=å›¾ç‰‡url2&&... è¡¨ç¤º</textarea>
                    </div>
                </div>


                <div class="layui-form-item mt-30 pb-30">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="button" id="save_company">ä¿å­˜</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
	$(document).ready(function () {
		layer.config({
			title: 'æç¤º'
		})

		$("#save_company").bind('click', function () {
			var company_id = $('#company_id').val();
			var company_introduction = $('#company_introduction').val();
			var company_character = $('#company_character').val();
			var company_imgUrl = $('#company_imgUrl').val();
			var company_honor = $('#company_honor').val();
			var company_email = $('#company_email').val();
			var company_address = $('#company_address').val();
			var company_phoneNumber = $('#company_phoneNumber').val();
			var company_tel = $('#company_tel').val();
			if (!(company_phoneNumber.trim() && company_tel.trim() && company_introduction.trim() && company_email.trim() && company_address.trim() && company_imgUrl.trim() && company_honor.trim())) {
				layer.msg("å…¬å¸ä¿¡æ¯ä¸èƒ½ä¸ºç©ºå“¦ğŸ˜¯!");
				return;
			}

			$.ajax({
				type: 'POST',
				url: '/admin/company/save',
				data: {
					company_id: company_id,
					introduction: company_introduction,
					character: company_character,
					imgUrl: company_imgUrl,
					honor: company_honor,
					email: company_email,
					address: company_address,
					phoneNumber: company_phoneNumber,
					tel: company_tel
				}
			}).done(function (res) {
				if (res.success === 1) {
					layer.msg("å…¬å¸ä¿¡æ¯ä¿å­˜æˆåŠŸ!")
				}
			})

		})
	})
</script>
</body>